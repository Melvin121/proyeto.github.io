{"version":3,"sources":["components/assets/man.png","pages/Login.js","components/Waiting.js","components/Comment.js","components/AddComment.js","components/EditPost.js","components/Post.js","components/GetPost.js","components/CreatePost.js","components/Navbar.js","pages/User.js","App.js","reportWebVitals.js","index.js"],"names":["Login","navigate","useNavigate","username","useRef","password","e","a","preventDefault","usernameValue","current","value","passwordValue","axios","post","response","status","localStorage","setItem","data","token","role","className","onSubmit","src","LOGIN","htmlFor","id","type","ref","Waiting","class","Comment","info","description","user","AddComment","afterSubmit","useState","inputVal","setInputVal","body","console","log","patch","headers","Authorization","getItem","onChange","target","placeholder","EditPost","titleref","descriptionref","imageref","titleedit","descriptionedit","imageedit","alert","put","title","image","name","Post","struct","_id","createdAt","likes","comments","Visibility","setVisibility","showComments","setShowComments","commentState","setCommentState","some","it","liked","setLiked","length","likesCount","setLikesCount","err","Date","toLocaleDateString","alt","onClick","map","shortid","generate","comment","val","GetPost","posts","setPosts","useEffect","get","getPosts","CreateForm","formData","FormData","Object","fromEntries","entries","res","Navbar","CreatePost","User","whoami","setWhoami","getIdentity","App","path","element","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1a10bc10.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/man.ba422ca1.png\";","import axios from 'axios';\r\nimport { useNavigate } from 'react-router';\r\nimport React, { useRef } from 'react';\r\nimport LOGIN from './../components/assets/man.png';\r\n\r\nconst Login = () => {\r\n    const navigate = useNavigate();\r\n    const username = useRef(null);\r\n    const password = useRef(null);\r\n\r\n    async function onSubmit(e){\r\n        e.preventDefault();\r\n        \r\n        const usernameValue = username.current.value;\r\n        const passwordValue = password.current.value;\r\n        \r\n        try {\r\n        const response = await axios.post('https://posts-pw2021.herokuapp.com/api/v1/auth/signin', {username: usernameValue, password: passwordValue});\r\n\r\n        if(response.status === 200){\r\n            localStorage.setItem('token', response.data.token);\r\n            localStorage.setItem('role', response.data.role);\r\n            navigate('/')\r\n            }\r\n        } catch(error) {\r\n            const { response } = error;\r\n\r\n            let message = '';\r\n\r\n            if(response.status=== 401) message = \"Revise sus datos\";\r\n            else if (response.status === 500) message = \"Error de servidor\";\r\n            else if (response.status === 404) message = \"No se encontro el usuario\"\r\n\r\n        }\r\n    }\r\n\r\n    return(\r\n        <form className= \"flex justify-center flex-col bg-gray-900 items-center min-h-screen \" onSubmit={onSubmit}>\r\n            <h1 className=\"text-white text-6xl\"> Login </h1>\r\n            <img src={LOGIN} className=\"w-1/6 m-6\"  />\r\n            <div className=\"flex-col\">               \r\n                <label htmlFor=\"L-user\" className=\"text-white flex justify-center\">User</label>\r\n                <input id= \"L-user\" type=\"text\" ref={username} className=\"rounded border\" />\r\n            </div>\r\n            <div className=\"\">\r\n                <label htmlFor=\"L-password\" className=\"text-white flex justify-center\">Password</label>\r\n                <input id= \"L-password\" type=\"password\" ref={password} className=\"rounded border\" />\r\n            </div>\r\n            <div className=\"flex space-y-2\">\r\n                <button className=\"bg-white border rounded-2xl m-3 w-full py-2 px-8 \">Login </button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\n\r\nconst Waiting = () => (\r\n    <div className=\"absolute top-0 left-0 z-20 bg-white h-screen w-screen flex justify-center items-center flex-col\">\r\n        <img src=\"http://www.bobesponjaweb.com/wp-content/uploads/2014/11/18.jpg\" className=\"bg-gradient-to-t\"></img>\r\n        <div class=\"absolute w-full py-3.5 text-white text-5xl text-center leading-4 overflow-y-hidden\">HANG ON ;)</div>\r\n   </div>\r\n);\r\n\r\nexport default Waiting;","import React from 'react';\r\n\r\nconst Comment = ({ info }) => {\r\n    const { description, user } = info;\r\n\r\n    return (\r\n        <div className=\"w-full border-t my-3\">\r\n            <h1 className=\"mt-2 text-sm font-medium text-purple-800\">\r\n                @\r\n                { user?.username }\r\n            </h1>\r\n            <p className=\"text-xs pl-4\">{ description }</p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Comment;","import React , {useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nconst AddComment = ({ post, afterSubmit }) => {\r\n    const [inputVal, setInputVal] = useState('');\r\n\r\n\r\n    function onChange(e) {\r\n        setInputVal(e.target.value);\r\n    }\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const body = {\r\n            description: inputVal,\r\n        };\r\n        console.log(post);\r\n        await axios.patch(`https://posts-pw2021.herokuapp.com/api/v1/post/comment/${post}`, body, {\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n        });\r\n\r\n        setInputVal('');\r\n\r\n        afterSubmit(body);\r\n    }\r\n\r\n    return (\r\n        <form className=\"w-full\" onSubmit={onSubmit}>\r\n            <input\r\n                value={inputVal}\r\n                onChange={onChange}\r\n                className=\"px-4 py-2 w-full rounded-2xl text-gray-800 border-2 border-blue-500 text-xs\"\r\n                type=\"text\"\r\n                placeholder=\"Presiona enter para comentar\"\r\n            />\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AddComment;","import axios from 'axios';\r\nimport React, { useRef, useState } from 'react';\r\nimport { CheckCircleIcon } from '@heroicons/react/solid';\r\n\r\nconst EditPost = ({id}) => {\r\n    \r\n    const titleref = useRef(null);\r\n    const descriptionref = useRef(null);\r\n    const imageref = useRef(null);\r\n    \r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n        const titleedit = titleref.current.value;\r\n        const descriptionedit = descriptionref.current.value;\r\n        const imageedit =  imageref.current.value;\r\n\r\n        if (descriptionedit === '' && titleedit === '' && imageedit === '') return alert('Llena el titulo y la descripcion');\r\n\r\n        console.log(descriptionedit);\r\n\r\n        const res = await axios.put(`https://posts-pw2021.herokuapp.com/api/v1/post/update/${id}`, \r\n        { title : titleedit, description : descriptionedit, image : imageedit }, {\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <form id=\"form\" onSubmit={onSubmit} className=\"bg-white bg-opacity-30 mt-4 rounded-2xl p-4 text-white font-bold space-y-3\">\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"title\">Titulo</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"title\" id=\"title\" ref ={titleref} />\r\n            </div>\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"description\">Descripcion</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"description\" id=\"description\" ref = {descriptionref}/>\r\n            </div>\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"image\">Imagen</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"image\" id=\"image\" ref = {imageref}/>\r\n            </div>\r\n            <div className=\"flex flex-row text-sm items-center justify-center\">\r\n                <button type=\"submit\" className=\"bg-blue-500 w-2/3 rounded-2xl text-center flex py-1 justify-center items-center font-bold\">\r\n                    <CheckCircleIcon className=\"mr-2 h-5 w-5\" />\r\n                    Editar\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default EditPost;","import shortid from 'shortid';\r\nimport axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { ThumbUpIcon, ChatAlt2Icon } from '@heroicons/react/solid';\r\nimport Comment from './Comment';\r\nimport AddComment from './AddComment';\r\nimport EditPost from './EditPost';\r\n\r\nconst Post = ({ username, struct }) => {\r\n    const {\r\n        _id, title, description, image, user, createdAt, likes, comments,\r\n    } = struct;\r\n    const [ Visibility, setVisibility] = useState(false);\r\n    const [showComments, setShowComments] = useState(false);\r\n    const [commentState, setCommentState] = useState(comments);\r\n    const [liked, setLiked] = useState(likes.some((it) => it.username === username));\r\n    const [likesCount, setLikesCount] = useState(likes.length);\r\n    const role = localStorage.getItem('role')\r\n\r\n    function addComment(comment) {\r\n        const val = [...commentState, { ...comment, user: { username : username.username } }];\r\n\r\n        setCommentState(val);\r\n    }\r\n\r\n    async function likePost() {\r\n        try {\r\n            const { data } = axios.patch(`https://posts-pw2021.herokuapp.com/api/v1/post/like/${_id}`, null, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            });\r\n\r\n\r\n            if (!liked) {\r\n                setLikesCount(likesCount + 1);\r\n                setLiked(true);\r\n            } else {\r\n                setLikesCount(likesCount - 1);\r\n                setLiked(false);\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    async function HidePost() {\r\n        try {\r\n            const { data } = axios.patch(`https://posts-pw2021.herokuapp.com/api/v1/post/toggle/${_id}`, null, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            });\r\n\r\n\r\n           console.log(data);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col space-evenly rounded-2xl p-4 w-1/4 text-white justify-evenly\">\r\n            <div className=\"w-full flex flex-col font-bold text-white overflow-x-auto justify-evenly\">\r\n                <h1 className=\"w-1/2\">\r\n                    @\r\n                    {user?.username}\r\n                </h1>\r\n                <h2 className=\"text-right w-1/2\">{ new Date(createdAt).toLocaleDateString() }</h2>\r\n            </div>\r\n            {\r\n                image && <img className=\"w-min h-min object-cover my-2 rounded-2xl\" src={image} alt=\"No se pudo cargar la imagen\" />\r\n            }\r\n            {\r\n                role === 'admin' && (\r\n            <div className=\"flex flex-col justify-evenly text-purple-800\">\r\n                { Visibility && <EditPost id = {_id} />}\r\n                <button onClick={()=>setVisibility(!Visibility)}>Editar</button>\r\n                <button onClick={HidePost}>Ocultar</button>\r\n                \r\n            </div>\r\n                )\r\n            }\r\n            <div className=\"w-full flex flex-col font-medium text-sm space-y-2, overflow-x-auto overflow-y-auto\">\r\n                <h1 className=\"\">{ title }</h1>\r\n                <h2 className=\"font-normal text-xs\">{ description }</h2>\r\n            </div>\r\n            <div className=\"w-full mt-4 flex justify-center\">\r\n                <button\r\n                    onClick={likePost}\r\n                    type=\"button\"\r\n                    className={`flex space-x-2 text-xs justify-center items-center w-1/2 ${liked && 'text-purple-800'}`}\r\n                >\r\n                    <span><ThumbUpIcon className=\"mr-2 w-5 h-5 mx-0\" /></span>\r\n                    { likesCount }\r\n                </button>\r\n                <button\r\n                    onClick={() => setShowComments(!showComments)}\r\n                    type=\"button\"\r\n                    className={`flex space-x-2 text-xs justify-center items-center w-1/2 ${showComments && 'text-purple-800'}`}\r\n                >\r\n                    <span><ChatAlt2Icon className=\"mr-2 w-5 h-5 mx-0\" /></span>\r\n                    { commentState.length }\r\n                </button>\r\n            </div>\r\n            <div className={`${!showComments && 'hidden'} mt-4 w-full flex flex-col items-start`}>\r\n                {\r\n                    comments && commentState.map((it) => (\r\n                        <Comment\r\n                            key={shortid.generate()}\r\n                            info={it}\r\n                        />\r\n                    ))\r\n                }\r\n                <AddComment post={_id} afterSubmit={addComment} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Post;","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Waiting from './Waiting';\r\nimport Post from './Post';\r\n\r\nconst GetPost = (username) => {\r\n    const [posts, setPosts] = useState({\r\n        status: 'LOADING',\r\n        data: {},\r\n    });\r\n    const token = localStorage.getItem('token');\r\n    console.log(token);\r\n\r\n    useEffect(() => {\r\n        async function getPosts() {\r\n            const { data  } = await axios.get('https://posts-pw2021.herokuapp.com/api/v1/post/all?limit=666&page=0', {\r\n                headers : {\r\n                    Authorization : `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            });\r\n            setPosts ({status : 'Done' , data: data.data });\r\n        }\r\n\r\n        getPosts();\r\n        \r\n    }, []);\r\n\r\n    if (posts.status === 'LOADING') return <Waiting />;\r\n    console.log(posts);\r\n    return (\r\n        <div className=\"flex flex-wrap px-6 mt-2 justify-center items-center\">\r\n            {\r\n                posts.data && posts.data.map((it) => \r\n                <Post username={username} key={it._id} struct={it} />)\r\n            }   \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GetPost;","import axios from 'axios';\r\nimport React from 'react';\r\nimport { CheckCircleIcon } from '@heroicons/react/solid';\r\n\r\nconst CreateForm = () => {\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData(e.target);\r\n\r\n        const body = Object.fromEntries(formData.entries());\r\n\r\n        if (body.title === '' || body.description === '') return alert('Llena el titulo y la descripcion');\r\n\r\n        const res = await axios.post('https://posts-pw2021.herokuapp.com/api/v1/post/create', { title : body.title, description : body.description, image : body.image }, {\r\n            headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n        });\r\n\r\n        console.log(res);\r\n    }\r\n\r\n    return (\r\n        <form id=\"form\" onSubmit={onSubmit} className=\"bg-white bg-opacity-30 mt-4 rounded-2xl p-4 text-white font-bold space-y-3\">\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"title\">Titulo</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"title\" id=\"title\" />\r\n            </div>\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"description\">Descripcion</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"description\" id=\"description\" />\r\n            </div>\r\n            <div className=\"flex flex-col text-sm\">\r\n                <label htmlFor=\"image\">Imagen</label>\r\n                <input className=\"text-gray-800 rounded-full px-2 py-1 my-1\" type=\"text\" name=\"image\" id=\"image\" />\r\n            </div>\r\n            <div className=\"flex flex-row text-sm items-center justify-center\">\r\n                <div className=\"flex text-sm w-1/3\">\r\n                    <label htmlFor=\"active\">Activo</label>\r\n                    <input\r\n                        className=\"rounded-lg text-blue-500 w-5 h-5 mx-2 focus:ring-blue-400 focus:ring-opacity-25 border border-gray-300\"\r\n                        type=\"checkbox\"\r\n                        name=\"active\"\r\n                        id=\"active\"\r\n                    />\r\n                </div>\r\n                <button type=\"submit\" className=\"bg-blue-500 w-2/3 rounded-2xl text-center flex py-1 justify-center items-center font-bold\">\r\n                    <CheckCircleIcon className=\"mr-2 h-5 w-5\" />\r\n                    Publicar\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default CreateForm;\r\n","import React, {useState} from \"react\";\r\nimport CreatePost from \"./CreatePost\";\r\n\r\nconst Navbar = () => {\r\n    const [ Visibility, setVisibility] = useState(false);\r\n    \r\n    return (       \r\n           \r\n        <div>\r\n            <div className=\"px-8\">\r\n        \r\n            {Visibility && <CreatePost />}\r\n            <button onClick={()=>setVisibility(!Visibility)} type=\"button\" className=\"w-1/4 bg-white \r\n            text-center rounded-2xl flex text-black hover:bg-purple-900 hover:text-white  justify-center mt-3 py-4 \r\n            \">\r\n                Publicar :)\r\n             </button>\r\n           </div>)\r\n        </div>\r\n            \r\n        \r\n    )\r\n}\r\n\r\nexport default Navbar;\r\n","import axios from 'axios';\r\nimport React, {useEffect, useState} from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport GetPost from \"../components/GetPost\";\r\nimport Navbar from '../components/Navbar';\r\n\r\n\r\nconst User = () => {\r\n    const [whoami, setWhoami] = useState();\r\n\r\n    const navigate = useNavigate();\r\n    const user = localStorage.getItem('token');\r\n    const role = localStorage.getItem('role');\r\n\r\n    useEffect(() => {\r\n        async function getIdentity() {\r\n            const { data } = await axios.get('https://posts-pw2021.herokuapp.com/api/v1/auth/whoami', {\r\n                headers: {\r\n                    Authorization: `Bearer ${user}`,\r\n                },\r\n            });\r\n            \r\n            setWhoami(data.username);\r\n        }\r\n\r\n        if (user == null) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        getIdentity();\r\n    }, []);\r\n\r\n    return(\r\n        <div >\r\n            {   \r\n             role === 'admin' && (\r\n             <Navbar />\r\n             )\r\n            }\r\n            <GetPost username={whoami}/>\r\n        </div>\r\n    \r\n    );\r\n};\r\n\r\nexport default User;","import React from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n} from 'react-router-dom';\r\nimport Login from './pages/Login';\r\nimport User from './pages/User';\r\nimport Navbar from './components/Navbar';\r\n\r\nconst App = () =>\r\n(\r\n  <Router>\r\n    <Routes>\r\n      <Route path=\"/\" element={<User />} />\r\n      <Route path=\"/Login\" element={<Login />} />\r\n    </Routes>\r\n  </Router>\r\n);\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}